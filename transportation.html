<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transportation - GLOSPOT</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .card-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; padding: 40px 20px; }
    .card { background-color: white; border-radius: 15px; padding: 20px; text-align: center; width: 220px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); cursor: default; }
    .card img { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin: 0 auto 15px auto; display: block; }
    .card h3 { font-size: 1.2rem; color: #004aad; margin-bottom: 10px; }
    .card p { font-size: 1rem; color: #333; margin-bottom: 10px; }
    .booking-form { max-width: 500px; margin: 40px auto; padding: 30px; background-color: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    .booking-form h3 { text-align: center; margin-bottom: 20px; color: #004aad; }
    .booking-form label { display: block; margin-bottom: 5px; font-weight: bold; color: #004aad; }
    .booking-form input, .booking-form select { width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 5px; border: 1px solid #ccc; }
    .booking-form button { width: 100%; padding: 10px; background-color: #ffd700; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: transform 0.3s, background-color 0.3s; }
    .booking-form button:hover { transform: scale(1.05); background-color: #e6c200; }
    #booking-message { text-align: center; font-weight: bold; margin-top: 15px; color: green; }
  </style>
</head>
<body>

<header>
  <div class="logo-container">
    <img src="images/glospot-logo.png" alt="GLOSPOT Logo" class="logo">
    <h1>GLOSPOT</h1>
  </div>
  <nav id="main-nav">
    <a href="index.html">Home</a>
    <a href="hotels.html">Hotels</a>
    <a href="guides.html">Guides</a>
    <a href="transportation.html" class="active">Transportation</a>
    <a href="signup.html" id="signup-link">Sign Up</a>
    <a href="signin.html" id="signin-link">Sign In</a>
    <button id="logout-btn" style="display:none;">Log Out</button>
  </nav>
</header>

<section id="transport-options">
  <h2>Transportation Options</h2>
  <div class="card-container" id="transport-slider">
    <!-- Cards populated via JS -->
  </div>
</section>

<section class="booking-form">
  <h3>Book Your Transportation</h3>
  <label for="transport-select">Select Transportation:</label>
  <select id="transport-select">
    <option value="">-- Choose an Option --</option>
    <option value="Bus Services">Bus Services</option>
    <option value="Private Cars">Private Cars</option>
  </select>

  <label for="name">Full Name:</label>
  <input type="text" id="name" placeholder="Your Name" required>

  <label for="email">Email:</label>
  <input type="email" id="email" placeholder="you@example.com" required>

  <label for="phone">Phone:</label>
  <input type="text" id="phone" placeholder="Your Phone Number" required>

  <label for="adults">Number of Adults:</label>
  <input type="number" id="adults" placeholder="Number of Adults" min="1" required>

  <label for="kids">Number of Kids:</label>
  <input type="number" id="kids" placeholder="Number of Kids" min="0" required>

  <label for="date">Travel Date:</label>
  <input type="date" id="date" required>

  <button id="book-btn">Book Now</button>
  <div id="booking-message"></div>
</section>

<footer>
  <p>Â© 2025 GLOSPOT</p>
</footer>

<script type="module" src="firebase-config.js"></script>
<script type="module">
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";
  const db = getFirestore();

  // Transportation booking
  const bookBtn = document.getElementById("book-btn");
  const transportSelect = document.getElementById("transport-select");
  const nameInput = document.getElementById("name");
  const emailInput = document.getElementById("email");
  const phoneInput = document.getElementById("phone");
  const adultsInput = document.getElementById("adults");
  const kidsInput = document.getElementById("kids");
  const dateInput = document.getElementById("date");
  const bookingMessage = document.getElementById("booking-message");

  bookBtn.addEventListener("click", async () => {
    const transport = transportSelect.value;
    const name = nameInput.value.trim();
    const email = emailInput.value.trim();
    const phone = phoneInput.value.trim();
    const adults = adultsInput.value;
    const kids = kidsInput.value;
    const date = dateInput.value;

    if (!transport || !name || !email || !phone || !adults || !kids || !date) {
      bookingMessage.textContent = "Please fill all fields.";
      bookingMessage.style.color = "red";
      return;
    }

    try {
      await addDoc(collection(db, "transport_bookings"), {
        transport, name, email, phone, adults, kids, date, timestamp: serverTimestamp()
      });

      bookingMessage.textContent = "Booking successful!";
      bookingMessage.style.color = "green";

      transportSelect.value = "";
      nameInput.value = "";
      emailInput.value = "";
      phoneInput.value = "";
      adultsInput.value = "";
      kidsInput.value = "";
      dateInput.value = "";

    } catch (error) {
      console.error("Error booking:", error);
      bookingMessage.textContent = "Failed to make booking.";
      bookingMessage.style.color = "red";
    }
  });

  // Transportation cards slideshow
  const transports = [
    { name: "Bus Services", img: "images/bus.png", desc: "Comfortable intercity buses for all your travel needs." },
    { name: "Private Cars", img: "images/car.png", desc: "Rent private cars for personal or group trips." }
  ];

  const container = document.getElementById("transport-slider");
  let index = 0;

  function renderTransports() {
    container.innerHTML = "";
    for (let i = 0; i < transports.length; i++) {
      const t = transports[(index + i) % transports.length];
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<img src="${t.img}" alt="${t.name}"><h3>${t.name}</h3><p>${t.desc}</p>`;
      container.appendChild(card);
    }
  }

  renderTransports();
  setInterval(() => {
    index = (index + 1) % transports.length;
    renderTransports();
  }, 5000);
</script>
<script type="module" src="auth.js"></script>
</body>
</html>
